<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Buscar Alunos</title>

</head>
<body>
    <h1>Listagem de Alunos</h1>
    <table id="tabela-alunos">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Telefone</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <script>
        // Faz a requisição AJAX ao endpoint da API buscarAlunos
        fetch(`http://localhost:3000/api/aluno`)
            .then(response => response.json())
            .then(data => {
                // Limpa a tabela antes de preencher com os novos dados
                const tabela = document.getElementById('tabela-alunos');
                const corpoTabela = tabela.querySelector('tbody');
                corpoTabela.innerHTML = '';

                if (data.error) {
                    // Exibe mensagem de erro caso ocorra algum problema
                    console.error(data.error);
                    alert('Ocorreu um erro ao buscar os alunos.');
                } else {
                    // Preenche a tabela com os dados dos alunos
                    for (let i = 0; i < data.result.length; i++) {
                        const aluno = data.result[i];
                        const linha = document.createElement('tr');
                        linha.innerHTML = `
                            <td>${aluno.id}</td>
                            <td>${aluno.nome}</td>
                            <td>${aluno.matricula}</td>
                        `;
                        corpoTabela.appendChild(linha);
                    }
                }
            })
            .catch(error => {
                // Exibe mensagem de erro caso ocorra algum problema na requisição
                console.error(error);
                alert('Ocorreu um erro ao buscar os alunos.');
            });
    </script>
</body>
</html>
